<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>スキルアップ講座管理 - Suna Admin</title>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body class="utage-body">
    <!-- UTAGE風トップヘッダー -->
    <header class="utage-header">
        <div class="utage-header-content">
            <div class="utage-logo">
                <svg width="115" height="55" viewBox="0 0 115 55" class="flex-shrink-0">
                    <!-- 大きな円（右上、明るいターコイズブルー） -->
                    <circle cx="90" cy="20" r="13" fill="#67E8F9" opacity="0.85"/>

                    <!-- 中くらいの円（左中央、濃いブルー） -->
                    <circle cx="73" cy="28" r="8" fill="#2563EB" opacity="0.9"/>

                    <!-- 小さな円（右下、薄いターコイズ） -->
                    <circle cx="83" cy="35" r="5" fill="#A7F3D0" opacity="0.75"/>

                    <!-- テキスト "suna" - 太字、濃いネイビー -->
                    <text x="0" y="42" font-size="26" font-weight="700" fill="#1E293B" font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif" letter-spacing="-1.2px">
                        suna
                    </text>
                </svg>
            </div>
            <div class="utage-header-right">
                <div class="school-selector">
                    <select id="admin-school-select">
                        <option value="elementary">🎒 小学部</option>
                        <option value="junior">📖 中学部</option>
                        <option value="senior">🎓 高校部</option>
                    </select>
                </div>
                <span class="admin-user-info" id="admin-user-info">管理者: </span>
                <button class="utage-logout-btn" onclick="adminApp.logout()">ログアウト</button>
            </div>
        </div>
    </header>

    <div class="utage-layout">
        <!-- 左サイドバーナビゲーション -->
        <aside class="utage-sidebar">
            <div class="utage-sidebar-content">
                <h2 class="utage-sidebar-title">スキルアップ講座管理</h2>
                
                <nav class="utage-nav">
                    <ul class="utage-nav-list">
                        <li class="utage-nav-item">
                            <button class="utage-nav-link active" data-tab="dashboard" onclick="adminApp.switchTab('dashboard')">
                                <span class="utage-nav-icon">📊</span>
                                <span>ダッシュボード</span>
                            </button>
                        </li>
                        <li class="utage-nav-item">
                            <button class="utage-nav-link" onclick="window.location.href='subjects-admin.html'">
                                <span class="utage-nav-icon">📁</span>
                                <span>コンテンツ管理</span>
                            </button>
                        </li>
                        <li class="utage-nav-item">
                            <button class="utage-nav-link" data-tab="students" onclick="console.log('Students button clicked'); if(window.adminApp) { window.adminApp.switchTab('students'); } else if(window.switchTabGlobal) { window.switchTabGlobal('students'); } else { console.error('No switchTab function found'); }">
                                <span class="utage-nav-icon">👥</span>
                                <span>受講生管理</span>
                            </button>
                        </li>
                        <li class="utage-nav-item">
                            <button class="utage-nav-link" data-tab="lessons" onclick="console.log('Lessons button clicked'); if(window.adminApp) { window.adminApp.switchTab('lessons'); } else if(window.switchTabGlobal) { window.switchTabGlobal('lessons'); } else { console.error('No switchTab function found'); }">
                                <span class="utage-nav-icon">📚</span>
                                <span>レッスン管理</span>
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- メインコンテンツエリア -->
        <main class="utage-main">
            <!-- ダッシュボードタブ -->
            <div class="utage-tab-panel active" id="dashboard-panel">
                <div class="utage-content-header">
                    <div class="utage-breadcrumb">
                        <span>ダッシュボード</span>
                    </div>
                    <h1 class="utage-page-title">スキルアップ講座管理</h1>
                </div>

                <div class="utage-content-body">
                    <!-- 統計カード -->
                    <div class="utage-stats-grid" id="stats-grid">
                        <!-- 統計カードはJavaScriptで生成 -->
                    </div>

                    <!-- クイック管理セクション -->
                    <div class="utage-section">
                        <div class="utage-section-header">
                            <h2 class="utage-section-title">クイック管理</h2>
                        </div>
                        <div class="quick-actions-grid">
                            <div class="quick-action-card" onclick="adminApp.switchTab('students')">
                                <div class="quick-action-icon">👥</div>
                                <div class="quick-action-content">
                                    <h3>受講生管理</h3>
                                    <p>受講生の追加・編集・削除</p>
                                </div>
                            </div>
                            <div class="quick-action-card" onclick="adminApp.switchTab('lessons')">
                                <div class="quick-action-icon">📚</div>
                                <div class="quick-action-content">
                                    <h3>レッスン管理</h3>
                                    <p>レッスンの管理・編集</p>
                                </div>
                            </div>
                            <div class="quick-action-card" onclick="adminApp.showRegistrationModal()">
                                <div class="quick-action-icon">➕</div>
                                <div class="quick-action-content">
                                    <h3>新規登録</h3>
                                    <p>新しい受講生を追加</p>
                                </div>
                            </div>
                            <div class="quick-action-card" onclick="window.location.href='subjects-admin.html'">
                                <div class="quick-action-icon">📁</div>
                                <div class="quick-action-content">
                                    <h3>コンテンツ管理</h3>
                                    <p>科目・コース管理</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 要注意受講生 -->
                    <div class="utage-section">
                        <div class="utage-section-header">
                            <h2 class="utage-section-title">要注意受講生</h2>
                            <button class="utage-btn utage-btn-secondary" onclick="adminApp.switchTab('students')">
                                すべて表示
                            </button>
                        </div>
                        <div class="attention-students-list" id="attention-students-list">
                            <!-- データはJavaScriptで生成 -->
                        </div>
                    </div>

                    <!-- 進捗トップ受講生 -->
                    <div class="utage-section">
                        <div class="utage-section-header">
                            <h2 class="utage-section-title">進捗優秀者</h2>
                            <button class="utage-btn utage-btn-secondary" onclick="adminApp.switchTab('students')">
                                すべて表示
                            </button>
                        </div>
                        <div class="top-students-list" id="top-students-list">
                            <!-- データはJavaScriptで生成 -->
                        </div>
                    </div>

                    <!-- 最近の活動 -->
                    <div class="utage-section">
                        <div class="utage-section-header">
                            <h2 class="utage-section-title">最近の活動</h2>
                            <button class="utage-btn utage-btn-secondary" onclick="adminApp.refreshActivity()">
                                🔄 更新
                            </button>
                        </div>
                        <div class="utage-table-container">
                            <table class="utage-table" id="recent-activity-table">
                                <thead>
                                    <tr>
                                        <th>時刻</th>
                                        <th>受講生</th>
                                        <th>アクション</th>
                                        <th>詳細</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- データはJavaScriptで生成 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 受講生管理タブ -->
            <div class="utage-tab-panel" id="students-panel">
                <div class="utage-content-header">
                    <div class="utage-breadcrumb">
                        <span>受講生管理</span>
                    </div>
                    <h1 class="utage-page-title">受講生</h1>
                </div>

                <div class="utage-content-body">
                    <div class="utage-section">
                        <div class="utage-section-header">
                            <div class="utage-section-left">
                                <div class="utage-tabs">
                                    <button class="utage-tab-btn active">未分類</button>
                                </div>
                            </div>
                            <div class="utage-section-actions">
                                <button class="utage-btn utage-btn-primary" onclick="adminApp.showRegistrationModal()">
                                    ➕ 受講生追加
                                </button>
                                <button id="group-management-btn" class="utage-btn utage-btn-secondary">グループ管理</button>
                                <button id="sort-students-btn" class="utage-btn utage-btn-secondary">並べ替え</button>
                                <div class="utage-search-box">
                                    <input type="text" placeholder="受講生・コース名で検索..." class="utage-search-input" id="student-search">
                                    <button class="utage-search-btn">🔍</button>
                                </div>
                            </div>
                        </div>

                        <div class="utage-table-container">
                            <table class="utage-table" id="student-table">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" class="utage-checkbox"></th>
                                        <th>受講生・コース名</th>
                                        <th>ステータス</th>
                                        <th>作成日</th>
                                        <th>更新日</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- データはJavaScriptで生成 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- レッスン管理タブ -->
            <div class="utage-tab-panel" id="lessons-panel">
                <div class="utage-content-header">
                    <div class="utage-breadcrumb">
                        <span>レッスン管理</span>
                    </div>
                    <h1 class="utage-page-title">レッスン管理</h1>
                </div>

                <div class="utage-content-body">
                    <div class="utage-section">
                        <div class="utage-section-header">
                            <div class="utage-section-left">
                                <div class="utage-tabs">
                                    <button class="utage-tab-btn active">並べ替え</button>
                                    <button class="utage-tab-btn">レッスングループ</button>
                                </div>
                            </div>
                            <div class="utage-section-actions">
                                <div class="utage-search-box">
                                    <input type="text" placeholder="レッスン名で検索..." class="utage-search-input">
                                    <button class="utage-search-btn">🔍</button>
                                </div>
                            </div>
                        </div>

                        <div class="utage-table-container">
                            <table class="utage-table" id="lessons-table">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" class="utage-checkbox"></th>
                                        <th>レッスン名</th>
                                        <th>ステータス</th>
                                        <th>作成日</th>
                                        <th>更新日</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- データはJavaScriptで生成 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 受講生登録モーダル -->
    <div class="utage-modal-overlay" id="registration-modal" style="display: none;">
        <div class="utage-modal-content">
            <div class="utage-modal-header">
                <h3 class="utage-modal-title">👨‍🎓 受講生を登録</h3>
                <button class="utage-modal-close" onclick="adminApp.closeRegistrationModal()">&times;</button>
            </div>
            <div class="utage-modal-body">
                <form id="registration-form" onsubmit="adminApp.registerStudent(event)">
                    <div class="utage-form-group">
                        <label for="reg-email">メールアドレス</label>
                        <input type="email" id="reg-email" required placeholder="student@example.com" class="utage-form-input">
                        <p class="utage-form-help">このメールアドレスでログインします</p>
                    </div>
                    <div class="utage-form-group">
                        <label for="reg-name">受講生名</label>
                        <input type="text" id="reg-name" required placeholder="山田太郎" class="utage-form-input">
                    </div>
                    <div class="utage-form-group">
                        <label for="reg-grade">学年</label>
                        <select id="reg-grade" required class="utage-form-select">
                            <option value="">学年を選択</option>
                            <option value="小学1年">小学1年</option>
                            <option value="小学2年">小学2年</option>
                            <option value="小学3年">小学3年</option>
                            <option value="小学4年">小学4年</option>
                            <option value="小学5年">小学5年</option>
                            <option value="小学6年">小学6年</option>
                            <option value="中学1年">中学1年</option>
                            <option value="中学2年">中学2年</option>
                            <option value="中学3年">中学3年</option>
                            <option value="高校1年">高校1年</option>
                            <option value="高校2年">高校2年</option>
                            <option value="高校3年">高校3年</option>
                        </select>
                    </div>
                    <div class="utage-form-info">
                        <div class="utage-info-box">
                            <h4>📝 登録後の流れ</h4>
                            <ol>
                                <li>自動でパスワードが生成されます</li>
                                <li>専用URLが発行されます</li>
                                <li>ログイン情報をコピーして受講生にお渡しください</li>
                            </ol>
                        </div>
                    </div>
                    <div class="utage-form-actions">
                        <button type="button" class="utage-btn utage-btn-secondary" onclick="adminApp.closeRegistrationModal()">
                            キャンセル
                        </button>
                        <button type="submit" class="utage-btn utage-btn-primary">
                            👨‍🎓 受講生を登録
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 互換性のため古いモーダルIDも残す -->
    <div class="utage-modal-overlay" id="invite-modal" style="display: none;">
        <div class="utage-modal-content">
            <div class="utage-modal-header">
                <h3 class="utage-modal-title">👨‍🎓 受講生を登録</h3>
                <button class="utage-modal-close" onclick="adminApp.closeRegistrationModal()">&times;</button>
            </div>
            <div class="utage-modal-body">
                <form id="invite-form" onsubmit="adminApp.registerStudent(event)">
                    <div class="utage-form-group">
                        <label for="invite-email">メールアドレス</label>
                        <input type="email" id="invite-email" required placeholder="student@example.com" class="utage-form-input">
                        <p class="utage-form-help">このメールアドレスでログインします</p>
                    </div>
                    <div class="utage-form-group">
                        <label for="invite-name">受講生名</label>
                        <input type="text" id="invite-name" required placeholder="山田太郎" class="utage-form-input">
                    </div>
                    <div class="utage-form-group">
                        <label for="invite-grade">学年</label>
                        <select id="invite-grade" required class="utage-form-select">
                            <option value="">学年を選択</option>
                            <option value="小学1年">小学1年</option>
                            <option value="小学2年">小学2年</option>
                            <option value="小学3年">小学3年</option>
                            <option value="小学4年">小学4年</option>
                            <option value="小学5年">小学5年</option>
                            <option value="小学6年">小学6年</option>
                            <option value="中学1年">中学1年</option>
                            <option value="中学2年">中学2年</option>
                            <option value="中学3年">中学3年</option>
                            <option value="高校1年">高校1年</option>
                            <option value="高校2年">高校2年</option>
                            <option value="高校3年">高校3年</option>
                        </select>
                    </div>
                    <div class="utage-form-actions">
                        <button type="button" class="utage-btn utage-btn-secondary" onclick="adminApp.closeRegistrationModal()">
                            キャンセル
                        </button>
                        <button type="submit" class="utage-btn utage-btn-primary">
                            👨‍🎓 受講生を登録
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="../js/main.js"></script>
    <script src="../js/admin.js"></script>
</body>
</html>