# AI学習サポート機能 - セットアップガイド

## 概要
受講生サイトの右下に配置されたAIチャットウィジェットが、OpenAI APIと連携して学習サポートを提供します。

## 実装済みファイル

### 1. フロントエンド
- `pages/student.html` - AIチャットウィジェットの読み込み
- `js/support-ai.js` - チャットUIの実装
- `styles/main.css` - チャットウィジェットのスタイル

### 2. バックエンド
- `api/support-ai.js` - OpenAI APIとの連携サーバーレス関数
- `package.json` - OpenAI SDK依存関係
- `vercel.json` - Vercel設定

## セットアップ手順

### 1. OpenAI APIキーの取得
1. [OpenAI Platform](https://platform.openai.com/) にアクセス
2. アカウント作成/ログイン
3. 「API Keys」から新しいAPIキーを作成
4. APIキーをコピーして保存

### 2. 環境変数の設定

#### ローカル開発環境
```bash
# .env ファイルを作成
OPENAI_API_KEY=sk-your-openai-api-key-here
```

#### Vercel本番環境
1. Vercelダッシュボードにアクセス
2. プロジェクト > Settings > Environment Variables
3. `OPENAI_API_KEY` を追加

### 3. デプロイ
```bash
# 依存関係をインストール
npm install

# Vercelにデプロイ
npm run deploy
```

## 機能詳細

### AIの特徴
- **学習特化型**: 学習支援に特化したAI
- **日本語対応**: 自然な日本語での会話
- **段階的指導**: 問題解決の手順を丁寧に説明
- **励ましサポート**: 学習意欲を高める励ましの言葉

### チャット機能
- **会話履歴保持**: 直近10回の会話を記憶
- **レスポンシブ対応**: モバイル・デスクトップ両対応
- **エラーハンドリング**: API制限やエラーの適切な処理

## 使用方法

### 受講生向け
1. 学習ページにアクセス
2. 右下の💬ボタンをクリック
3. 学習に関する質問を入力
4. AIからの回答を確認

### 質問例
- 「この数学の問題の解き方を教えて」
- 「英語の文法でわからないところがあります」
- 「効果的な勉強方法を教えて」
- 「テスト前の復習のコツは？」

## 技術仕様

### フロントエンド
- **技術**: Vanilla JavaScript, CSS3
- **UI**: Material Design風のモダンUI
- **レスポンシブ**: モバイルファーストデザイン

### バックエンド
- **プラットフォーム**: Vercel Serverless Functions
- **AI**: OpenAI GPT-3.5-turbo
- **セキュリティ**: CORS設定、エラーハンドリング

## 料金について

### OpenAI API使用料
- GPT-3.5-turbo: $0.002/1Kトークン（入力・出力合計）
- 月額使用量目安: 受講生100名で約$10-30程度

### コスト削減のヒント
- 会話履歴を適切に制限（現在10回）
- 不要なAPIコールを避ける
- 使用量モニタリングの実施

## トラブルシューティング

### よくある問題

#### 1. AIが応答しない
- 環境変数`OPENAI_API_KEY`が正しく設定されているか確認
- OpenAI APIの使用制限を確認

#### 2. エラーメッセージが表示される
- インターネット接続を確認
- しばらく時間をおいて再試行

#### 3. チャットが表示されない
- JavaScriptが有効になっているか確認
- ブラウザのキャッシュをクリア

## サポート

技術的な問題やご質問がございましたら、開発チームまでお問い合わせください。

---
**更新日**: 2025年6月24日  
**バージョン**: 1.0.0